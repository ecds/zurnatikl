{% extends 'site_base.html' %}
{% load static %}
{# base template for displaying a network graph #}
{# main blocks to extend: pregraph-content, postgraph-content, json-url or graph-init #}

{% block css %}
  {{ block.super }}
  <link href="{% static 'network/css/sigma.css' %}" rel="stylesheet"/>
{% endblock %}


{% block javascript %}
    {{ block.super }}
    <script src="{% static 'js/sigma/sigma.min.js' %}"></script>
    <script src="{% static 'js/sigma/plugins/sigma.parsers.json.min.js' %}"></script>
    <script src="{% static 'js/sigma/plugins/sigma.layout.forceAtlas2.min.js' %}"></script>
    <script src="{% static 'js/sigma/plugins/sigma.layout.forceLink.min.js' %}"></script>
    <script src="{% static 'js/sigma/plugins/sigma.plugins.design.min.js' %}"></script>
    <script src="{% static 'js/sigma/plugins/sigma.renderers.edgeLabels.min.js' %}"></script>
    <script src="{% static 'js/sigma/plugins/sigma.renderers.customEdgeShapes.min.js' %}"></script>
    <script src="{% static 'js/sigma/plugins/sigma.renderers.parallelEdges.min.js' %}"></script>
    <script src="{% static 'network/js/initgraph.js' %}"></script>
{% endblock %}


{% block content %}
<div class="container"> {# FIXME: without this, graphs don't display; may need to drop main/secondary-main ? #}
{% block pregraph-content %}{% endblock %}

<div id="sigma-container">
  <div id="graph-container">
      <div id="graph-status">
      <span class="status">
        <span id="text">Loading</span>... <i class="fa fa-spinner fa-spin"></i>
      </span>
      </div>
  </div>
</div>

{% block postgraph-content %}{% endblock %}

{% block graph-init %} {# extend to override config options #}
<script>
init_sigma_graph({json_url: "{% block json-url %}{% endblock %}"});
</script>
{% endblock %}
</div>
{% endblock %} {# content #}